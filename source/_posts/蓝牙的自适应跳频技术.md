---
title: 蓝牙的自适应跳频技术
date: 2017-06-28 22:45:35
tags: [BLE,BT]
---


### 背景
我们知道蓝牙技术是工作在2.4GHz免费工业频段上的短距离无线通信技术，同时工作在2.4G频率上的还有其他无线通信标准，例如802.11。我们知道如果两种频率同时工作在同一个频率段，那么就会产生相互干扰，造成数据传输质量降低。因此早期的蓝牙设计者考虑了这些问题后，决定采用调频的技术避免和802.11的频率竞争，即在每一个固定的频率上只驻留很短的时间然后在换一个频率进行数据的通信。

但其实早期的蓝牙与802.11之间的干扰非常的严重，足以毁掉双方的通信，造成了双方无法共存的局面，于是蓝牙采用了** 自适应跳频技术 **来自适应调频序列，排除掉存在干扰的射频信道。
### 定义

** 自适应跳频技术** 是建立在自动信道质量分析基础上的一种频率自适应和功率自适应控制相结合的跳频技术。该技术能使跳频通信过程自动避开被干扰的跳频频率点，并以最小的发射功率、最低的被截获概率，达到在无干扰的跳频信道上，长时间保持优质的通信。

<!-- more -->


### 原理
自适应跳频是指除了常规跳频(盲跳频)通信所必须具备的功能外，增加频率自适应控制和功率自适应控制。所谓频率自适应控制是在跳频通信过程中，从调频图谱中去除跳频频率集中被干扰的频点，使跳频通信在无干扰的可使用的频点上进行，从而大大提高跳频通信中接收信号的质量。所谓功率自适应控制，是指自适应跳频系统中，各站台相互以最小的发射功率获得可靠的通信，以达到尽可能增加系统的隐蔽性。

为了实现频率和功率自适应控制自适应跳频通信系统中各个台站必须具有接收信道信号质量实时评估部件和反向通信链路，以便实时测定信道接收功率大小和信道受干扰的情况，并用有关的自适应控制协议，通过反向链路及时通知发送站，调整发送站发射机功率，使收发双方同时从跳频频率集中去除受干扰的跳频频点。

### 系统结构及实现

![摘自 自适应调频技术及其实现 余世荣 李渊渊](http://upload-images.jianshu.io/upload_images/1806858-55c37fc9176e458f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

如上图就是一个自适应调频系统的实现结构图，首先其核心模块被分为了发送自适应调频控制单元和接收自适应调频控制单元，简单点就是，一个是处理发送的，一个是负责处理接收的。

相较于常规的调频，它具有收发自适应跳频图案发生器取代常规的跳频图案发生器，并增加了实时信道评估单元。

在发送白适应跳频控制单元中，发送数据处理主要完成发送同步信息、通信信令和信息数据的综合；发送自适应跳频图案产生器主要产生发送跳频图案，也包括根据反馈信道接收到的信令及时去除被干扰的跳频频率点。

在接收自适应跳频控制单元中，同步单元主要完成数据时钟同步、帧同步和跳频图案同步；实时信道质量评估单元主要根据接收信号的质量和一定的准则判定信道的好坏，从而发出指令，去除受干扰的跳频频率点，调整接收跳频图案，同时根据最低被截获概率，发出指令调整发送方的发射功率电平；接收数据处理单元完成信令信息和信息数据的分离和信令数据的处理，同时组织反馈信令发送。

另外，根据收到的信令数据实现同步调整发送跳频图案，使之与接收方同时从跳频频率集中去除受干扰的跳频频率点。与此同时把收到的自适应功率控制指令，通过发送数据处理单元，去控制发射机的输出功率电平。

### 通信过程

自适应跳频通信的主要过程一般可以分为通信建立、扫频和通信保持三个阶段。

在通信链路建立阶段，首先必须建立同步，在保证通信双方时钟同步、帧同步的基础上，确保双方跳频图案的同步。值得指出的是，对于自适应跳频通信来讲，为了保证同步的建立和通信的质量，在这阶段发射机的功率应能自动进行盲调整，一旦双方建立同步，立即结束盲功率调整，进入扫频阶段。所谓发射机功率盲调整是指通信双方在未建立同步时，应不断调高发射机功率，直至双方建立同步；或者直至发射机功率达到最大。

在扫频阶段，双方的实时信道质量评估单元对跳频频率集进行全集扫频，根据确定的信道评估标准确定被干扰的频点，给出可以使用的接收方的跳频频率集，并把被干扰的全部频率通知对方，使通信双方同时删除被干扰的全部频率，获得发送方的跳频频率集与接收方完全相同，并在确定的时刻同时进入自适应跳频通信阶段，同时建立功率自适应调整。

在通信保持阶段，由于信道条件的变化，例如：通信双方相对位置的变化或者干扰环境的改变等等，实时信道质量检测单元均会将变化的检测结果通过通信协议，以信令方式通知对方，随时将跳频频率集中的被干扰频点去除，并保证双方跳频图案的同步，同时调整发射机功率，保证双方均以最小的发射功率进行通信。

应该指出，在扫频阶段把已发现的跳频频率集中的全部坏频点集中删除，比进入通信阶段发现一个坏频点删除一个来得简单、快捷和高效，并能保证通信初始阶段就具有较好的接收信号质量。当然，带来的缺点是在干扰频点较多时，扫频阶段的持续时间较长。

### 参考

>自适应调频技术及其实现 余世荣 李渊渊